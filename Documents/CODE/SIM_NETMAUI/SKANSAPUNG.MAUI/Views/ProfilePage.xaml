<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="SKANSAPUNG.MAUI.Views.ProfilePage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:SKANSAPUNG.MAUI.ViewModels"
             x:DataType="viewmodels:ProfileViewModel"
             Title="Profile"
             BackgroundColor="{AppThemeBinding Light={StaticResource Gray50}, Dark={StaticResource Black}}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">

            <!-- Profile Header -->
            <Frame BackgroundColor="{StaticResource Primary}"
                   CornerRadius="15"
                   Padding="20">
                
                <Grid RowDefinitions="Auto,Auto" RowSpacing="15">
                    <Image Grid.Row="0"
                           Source="{Binding CurrentUser.Image, FallbackValue='default_avatar.png'}"
                           HeightRequest="80"
                           WidthRequest="80"
                           HorizontalOptions="Center"
                           Aspect="AspectFill"/>
                    
                    <VerticalStackLayout Grid.Row="1" Spacing="5">
                        <Label Text="{Binding CurrentUser.Name}"
                               FontSize="20"
                               FontAttributes="Bold"
                               TextColor="{StaticResource White}"
                               HorizontalOptions="Center"/>
                        
                        <Label Text="{Binding CurrentUser.Email}"
                               FontSize="14"
                               TextColor="{StaticResource White}"
                               Opacity="0.8"
                               HorizontalOptions="Center"/>
                        
                        <Label Text="{Binding CurrentUser.Role, StringFormat='Role: {0}'}"
                               FontSize="12"
                               TextColor="{StaticResource White}"
                               Opacity="0.6"
                               HorizontalOptions="Center"/>
                    </VerticalStackLayout>
                </Grid>
            </Frame>

            <!-- Profile Actions -->
            <Frame BackgroundColor="{StaticResource White}"
                   CornerRadius="15"
                   Padding="20">
                
                <VerticalStackLayout Spacing="15">
                    <Label Text="Profile Actions"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="{StaticResource Gray800}"/>
                    
                    <Button Text="Edit Profile"
                            Command="{Binding EditProfileCommand}"
                            BackgroundColor="{StaticResource Primary}"
                            TextColor="{StaticResource White}"
                            FontSize="16"
                            FontAttributes="Bold"
                            CornerRadius="10"
                            HeightRequest="50"/>
                    
                    <Button Text="Change Password"
                            Command="{Binding ChangePasswordCommand}"
                            BackgroundColor="{StaticResource Secondary}"
                            TextColor="{StaticResource White}"
                            FontSize="16"
                            FontAttributes="Bold"
                            CornerRadius="10"
                            HeightRequest="50"/>
                    
                    <Button Text="Logout"
                            Command="{Binding LogoutCommand}"
                            BackgroundColor="{StaticResource Danger}"
                            TextColor="{StaticResource White}"
                            FontSize="16"
                            FontAttributes="Bold"
                            CornerRadius="10"
                            HeightRequest="50"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Debugging Tools -->
            <BoxView HeightRequest="1" Color="LightGray" Margin="0,20" />
            <Label Text="Debugging Tools" FontAttributes="Bold" Margin="10,0" />
            <Grid ColumnDefinitions="*,Auto" Margin="10,5">
                <Label Text="Simulate Offline" VerticalOptions="Center" />
                <Switch IsToggled="{Binding SimulateOffline}" Grid.Column="1" />
            </Grid>
            
        </VerticalStackLayout>
    </ScrollView>

</ContentPage> 